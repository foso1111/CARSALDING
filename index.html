<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CARSALDING - Детейлинг премиум-класса</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }

        :root {
            --primary-dark: #0f0f0f;
            --secondary-dark: #1a1a1a;
            --accent-gold: #d4af37;
            --accent-gold-hover: #e6c44a;
            --text-light: #ffffff;
            --text-gray: #b0b0b0;
            --card-bg: rgba(255, 255, 255, 0.05);
            --border-radius: 12px;
            --transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        body {
            background: linear-gradient(135deg, var(--primary-dark) 0%, #151515 100%);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 80px;
        }

        .container {
            max-width: 420px;
            margin: 0 auto;
            padding: 15px;
        }

        /* Новая панель навигации */
        .bottom-nav-new {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--secondary-dark);
            border-radius: 25px;
            padding: 8px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 380px;
        }

        .nav-item-new {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-gray);
            text-decoration: none;
            transition: var(--transition);
            padding: 8px 15px;
            border-radius: 20px;
            min-width: 60px;
            position: relative;
        }

        .nav-item-new.active {
            color: var(--accent-gold);
            background: rgba(212, 175, 55, 0.15);
        }

        .nav-icon-new {
            font-size: 20px;
            margin-bottom: 3px;
            transition: var(--transition);
        }

        .nav-item-new.active .nav-icon-new {
            transform: scale(1.1);
        }

        .nav-text-new {
            font-size: 10px;
            font-weight: 500;
            letter-spacing: 0.3px;
        }

        .nav-center-item {
            background: var(--accent-gold);
            color: var(--primary-dark);
            padding: 12px;
            border-radius: 50%;
            margin: 0 10px;
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
            transition: var(--transition);
        }

        .nav-center-item:hover {
            transform: translateY(-7px) scale(1.05);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
        }

        .nav-center-icon {
            font-size: 20px;
        }

        /* Страница избранного */
        .favorites-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 80px;
            background: var(--primary-dark);
            z-index: 999;
            overflow-y: auto;
            padding: 15px;
        }

        .favorites-empty {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-gray);
        }

        .favorites-empty-icon {
            font-size: 64px;
            color: var(--accent-gold);
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .favorites-empty-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--text-light);
        }

        .favorites-empty-text {
            font-size: 14px;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .favorites-list {
            display: grid;
            gap: 15px;
        }

        .favorite-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: var(--transition);
            position: relative;
        }

        .favorite-card:hover {
            transform: translateY(-3px);
            border-color: rgba(212, 175, 55, 0.3);
        }

        .favorite-remove {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: var(--text-light);
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            z-index: 2;
        }

        .favorite-remove:hover {
            background: var(--accent-gold);
            color: var(--primary-dark);
            transform: scale(1.1);
        }

        .favorite-image {
            height: 160px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .favorite-info {
            padding: 15px;
        }

        .favorite-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .favorite-details {
            font-size: 12px;
            color: var(--text-gray);
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .favorite-price {
            font-size: 18px;
            font-weight: 700;
            color: var(--accent-gold);
            margin-bottom: 10px;
        }

        .favorite-features {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            font-size: 11px;
            color: var(--text-gray);
            margin-bottom: 15px;
        }

        .favorite-feature {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Кнопка добавления в избранное в карточках */
        .favorite-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: var(--text-light);
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            z-index: 2;
        }

        .favorite-btn.active {
            background: var(--accent-gold);
            color: var(--primary-dark);
        }

        .favorite-btn:hover {
            transform: scale(1.1);
        }

        /* Страница профиля */
        .profile-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 80px;
            background: var(--primary-dark);
            z-index: 999;
            overflow-y: auto;
            padding: 15px;
        }

        .profile-header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--accent-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 30px;
            color: var(--primary-dark);
            font-weight: bold;
        }

        .profile-name {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .profile-phone {
            color: var(--text-gray);
            font-size: 14px;
            margin-bottom: 10px;
        }

        .profile-email {
            color: var(--text-gray);
            font-size: 14px;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: var(--accent-gold);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-gray);
        }

        .profile-menu {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            overflow: hidden;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .menu-item {
            padding: 16px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: var(--transition);
        }

        .menu-item:last-child {
            border-bottom: none;
        }

        .menu-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .menu-item-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .menu-icon {
            width: 20px;
            color: var(--accent-gold);
            font-size: 16px;
            text-align: center;
        }

        .menu-text {
            font-size: 15px;
            font-weight: 500;
        }

        .menu-arrow {
            color: var(--text-gray);
            font-size: 12px;
        }

        .menu-badge {
            background: var(--accent-gold);
            color: var(--primary-dark);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 700;
        }

        .logout-btn {
            width: 100%;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text-light);
            padding: 12px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 10px;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--accent-gold);
        }

        /* Header Styles */
        header {
            text-align: center;
            padding: 15px 0 20px;
            position: relative;
        }

        .logo {
            font-size: 24px;
            font-weight: 800;
            letter-spacing: 2px;
            background: linear-gradient(45deg, var(--accent-gold), #f5e6a4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .tagline {
            font-size: 12px;
            color: var(--text-gray);
            font-weight: 300;
            letter-spacing: 1px;
        }

        /* Компактные услуги */
        .services-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .service-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 15px;
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            cursor: pointer;
            text-align: center;
            height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .service-card:hover {
            transform: translateY(-3px);
            border-color: rgba(212, 175, 55, 0.3);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .service-icon {
            font-size: 20px;
            color: var(--accent-gold);
            margin-bottom: 8px;
        }

        .service-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 5px;
            line-height: 1.2;
        }

        .btn-compact {
            display: inline-block;
            background: var(--accent-gold);
            color: var(--primary-dark);
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: 700;
            text-decoration: none;
            text-align: center;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            width: 100%;
            font-size: 12px;
        }

        .btn-compact:hover {
            background: var(--accent-gold-hover);
            transform: translateY(-1px);
        }

        /* Секция "Что мы можем еще" */
        .additional-section {
            margin: 20px 0;
        }

        .section-title {
            font-size: 16px;
            font-weight: 700;
            margin: 20px 0 12px;
            position: relative;
            padding-left: 12px;
        }

        .section-title:before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            height: 16px;
            width: 3px;
            background: var(--accent-gold);
            border-radius: 2px;
        }

        .compact-btn {
            display: block;
            width: 100%;
            background: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.05);
            color: var(--text-light);
            padding: 12px 15px;
            border-radius: var(--border-radius);
            font-weight: 600;
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
            margin-bottom: 10px;
        }

        .compact-btn:hover {
            border-color: var(--accent-gold);
            background: rgba(212, 175, 55, 0.1);
        }

        /* Блок локации */
        .location-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 15px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .location-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .location-title i {
            color: var(--accent-gold);
        }

        .location-address {
            margin-bottom: 12px;
            line-height: 1.4;
            color: var(--text-gray);
            font-size: 14px;
        }

        .location-hours {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 14px;
        }

        .hours-label {
            color: var(--text-gray);
        }

        .hours-value {
            font-weight: 600;
        }

        /* Форма обратного звонка */
        .contact-form {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 15px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .form-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 12px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 12px;
        }

        .form-input {
            width: 100%;
            padding: 10px 12px;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-light);
            font-size: 14px;
            transition: var(--transition);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent-gold);
        }

        /* Страница авторизации */
        .auth-page {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--primary-dark);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 20px;
        }

        .auth-logo {
            text-align: center;
            margin-bottom: 40px;
        }

        .auth-logo .logo {
            font-size: 32px;
            font-weight: 800;
            letter-spacing: 3px;
            background: linear-gradient(45deg, var(--accent-gold), #f5e6a4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .auth-logo .tagline {
            font-size: 14px;
            color: var(--text-gray);
            font-weight: 300;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 20px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 5px;
        }

        .auth-tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            background: none;
            border: none;
            color: var(--text-gray);
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .auth-tab.active {
            background: var(--accent-gold);
            color: var(--primary-dark);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .auth-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
        }

        .btn-primary {
            display: block;
            width: 100%;
            background: var(--accent-gold);
            color: var(--primary-dark);
            padding: 12px;
            border-radius: 8px;
            font-weight: 700;
            text-decoration: none;
            text-align: center;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            font-size: 15px;
            margin-top: 20px;
        }

        .btn-primary:hover {
            background: var(--accent-gold-hover);
            transform: translateY(-2px);
        }

        .auth-divider {
            text-align: center;
            margin: 20px 0;
            color: var(--text-gray);
            position: relative;
        }

        .auth-divider:before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            width: 45%;
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
        }

        .auth-divider:after {
            content: '';
            position: absolute;
            right: 0;
            top: 50%;
            width: 45%;
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
        }

        .btn-secondary {
            display: block;
            width: 100%;
            background: transparent;
            color: var(--accent-gold);
            padding: 12px;
            border-radius: 8px;
            font-weight: 600;
            text-align: center;
            transition: var(--transition);
            border: 1px solid var(--accent-gold);
            cursor: pointer;
            text-decoration: none;
        }

        .btn-secondary:hover {
            background: rgba(212, 175, 55, 0.1);
        }

        /* Страница всех услуг */
        .services-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 80px;
            background: var(--primary-dark);
            z-index: 999;
            overflow-y: auto;
            padding: 15px;
        }

        .page-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .back-button {
            color: var(--accent-gold);
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            padding: 5px;
        }

        .page-title {
            font-size: 18px;
            font-weight: 700;
        }

        .services-list {
            display: grid;
            gap: 15px;
        }

        .service-detail-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: var(--transition);
        }

        .service-detail-card:hover {
            transform: translateY(-3px);
            border-color: rgba(212, 175, 55, 0.3);
        }

        .service-image {
            height: 160px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .service-info {
            padding: 15px;
        }

        .service-detail-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--accent-gold);
        }

        .service-description {
            font-size: 14px;
            color: var(--text-gray);
            line-height: 1.5;
            margin-bottom: 12px;
        }

        .service-features {
            list-style: none;
            margin-bottom: 15px;
        }

        .service-features li {
            padding: 5px 0;
            font-size: 14px;
            display: flex;
            align-items: center;
        }

        .service-features li:before {
            content: '✓';
            color: var(--accent-gold);
            font-weight: bold;
            margin-right: 8px;
        }

        .price-tag {
            font-size: 20px;
            font-weight: 700;
            color: var(--accent-gold);
            text-align: center;
            margin: 15px 0;
        }

        /* Страница каталога автомобилей */
        .catalog-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 80px;
            background: var(--primary-dark);
            z-index: 999;
            overflow-y: auto;
        }

        .filters-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 15px;
            background: var(--card-bg);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .filter-toggle {
            background: none;
            border: 1px solid var(--accent-gold);
            color: var(--accent-gold);
            padding: 8px 15px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .filters-panel {
            background: var(--secondary-dark);
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: none;
        }

        .filter-group {
            margin-bottom: 15px;
        }

        .filter-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-gray);
        }

        .filter-row {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .filter-select {
            flex: 1;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            padding: 8px 12px;
            color: var(--text-light);
            font-size: 12px;
        }

        .price-inputs {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .price-input {
            flex: 1;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            padding: 8px 12px;
            color: var(--text-light);
            font-size: 12px;
        }

        .apply-filters {
            background: var(--accent-gold);
            color: var(--primary-dark);
            border: none;
            padding: 10px;
            border-radius: 6px;
            font-weight: 700;
            width: 100%;
            cursor: pointer;
            margin-top: 10px;
        }

        .cars-grid {
            padding: 15px;
            display: grid;
            gap: 15px;
        }

        .car-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: var(--transition);
            position: relative;
        }

        .car-card:hover {
            transform: translateY(-3px);
            border-color: rgba(212, 175, 55, 0.3);
        }

        .car-image {
            height: 200px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .car-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--accent-gold);
            color: var(--primary-dark);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 700;
        }

        .car-info {
            padding: 15px;
        }

        .car-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .car-details {
            font-size: 12px;
            color: var(--text-gray);
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .car-price {
            font-size: 18px;
            font-weight: 700;
            color: var(--accent-gold);
            margin-bottom: 10px;
        }

        .car-features {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            font-size: 11px;
            color: var(--text-gray);
            margin-bottom: 15px;
        }

        .car-feature {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .view-details-btn {
            width: 100%;
            background: transparent;
            border: 1px solid var(--accent-gold);
            color: var(--accent-gold);
            padding: 10px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .view-details-btn:hover {
            background: var(--accent-gold);
            color: var(--primary-dark);
        }

        .results-info {
            padding: 10px 15px;
            color: var(--text-gray);
            font-size: 14px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Анимации */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.6s ease forwards;
        }

        /* Success Message */
        .success-message {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--accent-gold);
            color: var(--primary-dark);
            padding: 12px;
            text-align: center;
            font-weight: 700;
            transform: translateY(-100%);
            transition: var(--transition);
            z-index: 1001;
            font-size: 14px;
        }

        .success-message.show {
            transform: translateY(0);
        }

        /* ОБНОВЛЕННЫЕ ФОНОВЫЕ ИЗОБРАЖЕНИЯ ДЛЯ УСЛУГ */
        .service-polishing { 
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), 
                       url('https://optim.tildacdn.com/tild3662-3065-4261-b566-333138643835/-/resize/720x/-/format/webp/__.png.webp'); 
            background-size: cover;
            background-position: center;
        }
        
        .service-wrapping { 
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), 
                       url('https://optim.tildacdn.com/tild3764-3366-4638-b335-633231656537/-/resize/720x/-/format/webp/__.png.webp'); 
            background-size: cover;
            background-position: center;
        }
        
        .service-cleaning { 
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), 
                       url('https://optim.tildacdn.com/tild3762-3538-4639-b739-313237636530/-/resize/720x/-/format/webp/__.png.webp'); 
            background-size: cover;
            background-position: center;
        }
        
        .service-more { 
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), 
                       url('https://avatars.mds.yandex.net/get-altay/13719877/2a000001936d6671b2909d5464d092b73c9f/XXXL'); 
            background-size: cover;
            background-position: center;
        }
        
        /* Детальные страницы услуг */
        .service-antidog { 
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), 
                       url('https://optim.tildacdn.com/tild3666-3837-4331-a631-336431663533/-/resize/720x/-/format/webp/__.png.webp'); 
            background-size: cover;
            background-position: center;
        }
        
        .service-noise { 
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), 
                       url('https://optim.tildacdn.com/tild3362-6332-4337-b561-316539636430/-/resize/720x/-/format/webp/____.png.webp'); 
            background-size: cover;
            background-position: center;
        }
        
        .service-tinting { 
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), 
                       url('https://optim.tildacdn.com/tild3634-3664-4834-b066-666635636537/-/resize/720x/-/format/webp/____.png.webp'); 
            background-size: cover;
            background-position: center;
        }
        
        .service-glass { 
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), 
                       url('https://optim.tildacdn.com/tild3862-6431-4334-a164-396561636261/-/resize/720x/-/format/webp/photo.png.webp'); 
            background-size: cover;
            background-position: center;
        }

        /* Изображения для автомобилей */
        .car-bmw-x5 { 
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), 
                       url('https://avatars.mds.yandex.net/get-autoru-vos/2160224/6557ca15aaff2edbc540222e9c516df2/584x438'); 
            background-size: cover;
            background-position: center;
        }
        
        .car-mercedes-e { 
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), 
                       url('https://i.pinimg.com/originals/13/96/7e/13967e05e54940fbab7318d9a9ebd52c.jpg'); 
            background-size: cover;
            background-position: center;
        }
        
        .car-audi-q7 { 
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), 
                       url('https://avatars.mds.yandex.net/get-verba/216201/2a00000190ba3707792975ddf821124d3eee/auto_main'); 
            background-size: cover;
            background-position: center;
        }
        
        .car-porsche-cayenne { 
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), 
                       url('https://avatars.mds.yandex.net/get-autoru-vos/6214394/9bbb87ddd6f2f13e5672e04a9014b7e1/1200x900'); 
            background-size: cover;
            background-position: center;
        }
    </style>
</head>
<body>
    <!-- Страница авторизации -->
    <div class="auth-page" id="authPage">
        <div class="auth-logo">
            <div class="logo">CARSALDING</div>
            <div class="tagline">Детейлинг премиум-класса</div>
        </div>

        <div class="auth-tabs">
            <button class="auth-tab active" onclick="showAuthTab('login')">Вход</button>
            <button class="auth-tab" onclick="showAuthTab('register')">Регистрация</button>
        </div>

        <!-- Форма входа -->
        <div class="auth-form active" id="loginForm">
            <div class="auth-title">Вход в аккаунт</div>
            <div class="form-group">
                <input type="tel" class="form-input" id="loginPhone" placeholder="+7 (___) ___-__-__" required>
            </div>
            <div class="form-group">
                <input type="password" class="form-input" id="loginPassword" placeholder="Пароль" required>
            </div>
            <button class="btn-primary" onclick="login()">Войти</button>
            <div class="auth-divider">или</div>
            <button class="btn-secondary" onclick="showAuthTab('register')">
                Создать новый аккаунт
            </button>
        </div>

        <!-- Форма регистрации -->
        <div class="auth-form" id="registerForm">
            <div class="auth-title">Создание аккаунта</div>
            <div class="form-group">
                <input type="text" class="form-input" id="registerName" placeholder="Ваше имя" required>
            </div>
            <div class="form-group">
                <input type="tel" class="form-input" id="registerPhone" placeholder="+7 (___) ___-__-__" required>
            </div>
            <div class="form-group">
                <input type="email" class="form-input" id="registerEmail" placeholder="Email" required>
            </div>
            <div class="form-group">
                <input type="password" class="form-input" id="registerPassword" placeholder="Пароль" required>
            </div>
            <div class="form-group">
                <input type="password" class="form-input" id="registerConfirmPassword" placeholder="Подтвердите пароль" required>
            </div>
            <button class="btn-primary" onclick="register()">Зарегистрироваться</button>
            <div class="auth-divider">или</div>
            <button class="btn-secondary" onclick="showAuthTab('login')">
                Уже есть аккаунт
            </button>
        </div>
    </div>

    <!-- Главная страница -->
    <div class="container" id="mainPage" style="display: none;">
        <header class="fade-in">
            <div class="logo">CARSALDING</div>
            <div class="tagline">Детейлинг премиум-класса</div>
        </header>

        <div class="services-grid">
            <div class="service-card service-polishing fade-in" onclick="openServiceModal('polishing')">
                <div class="service-icon"><i class="fas fa-sparkles"></i></div>
                <div class="service-title">Полировка кузова</div>
                <button class="btn-compact">ПЕРЕЙТИ</button>
            </div>
            
            <div class="service-card service-wrapping fade-in delayed-1" onclick="openServiceModal('wrapping')">
                <div class="service-icon"><i class="fas fa-layer-group"></i></div>
                <div class="service-title">Оклейка пленкой</div>
                <button class="btn-compact">ПЕРЕЙТИ</button>
            </div>
            
            <div class="service-card service-cleaning fade-in delayed-2" onclick="openServiceModal('cleaning')">
                <div class="service-icon"><i class="fas fa-soap"></i></div>
                <div class="service-title">Химчистка салона</div>
                <button class="btn-compact">ПЕРЕЙТИ</button>
            </div>
            
            <div class="service-card service-more fade-in delayed-3" onclick="showAllServicesPage()">
                <div class="service-icon"><i class="fas fa-plus-circle"></i></div>
                <div class="service-title">Все услуги</div>
                <button class="btn-compact">ПЕРЕЙТИ</button>
            </div>
        </div>

        <div class="additional-section fade-in delayed-1">
            <h2 class="section-title">ЧТО МЫ МОЖЕМ ЕЩЕ?</h2>
            <button class="compact-btn" onclick="showAllServicesPage()">
                Посмотреть все дополнительные услуги
            </button>
        </div>

        <div class="location-card fade-in delayed-2">
            <div class="location-title">
                <i class="fas fa-map-marker-alt"></i>
                <span>Ждет Вас в нашем автослоне?</span>
            </div>
            
            <div class="location-address">
                Москва, ул. Адмирала Макарова, 4h1
            </div>
            
            <div class="location-hours">
                <div class="hours-label">сегодня, с 9:00-22:00</div>
            </div>
            
            <button class="btn-compact" onclick="openMap()">Построить маршрут</button>
        </div>

        <div class="contact-form fade-in delayed-3">
            <div class="form-title">Обратный звонок</div>
            <div class="form-group">
                <input type="text" class="form-input" id="clientName" placeholder="Ваше имя">
            </div>
            <div class="form-group">
                <input type="tel" class="form-input" id="clientPhone" placeholder="Ваш телефон">
            </div>
            <button class="btn-compact" onclick="submitForm()">Заказать обратный звонок</button>
        </div>
    </div>

    <!-- Страница всех услуг -->
    <div class="services-page" id="servicesPage">
        <div class="page-header">
            <button class="back-button" onclick="goToMainPage()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="page-title">Все услуги</div>
            <div style="width: 24px;"></div>
        </div>

        <div class="services-list">
            <!-- Основные услуги -->
            <div class="service-detail-card">
                <div class="service-image service-polishing"></div>
                <div class="service-info">
                    <div class="service-detail-title">Полировка кузова</div>
                    <div class="service-description">
                        Полное восстановление блеска лакокрасочного покрытия. Удаление царапин, сколов и следов эксплуатации. Защита на 12 месяцев.
                    </div>
                    <ul class="service-features">
                        <li>Восстановление глубины цвета</li>
                        <li>Защита от УФ-лучей</li>
                        <li>Гидрофобное покрытие</li>
                        <li>Гарантия 12 месяцев</li>
                    </ul>
                    <div class="price-tag">от 8 000 ₽</div>
                    <button class="btn-compact">Записаться на услугу</button>
                </div>
            </div>

            <div class="service-detail-card">
                <div class="service-image service-wrapping"></div>
                <div class="service-info">
                    <div class="service-detail-title">Оклейка пленкой</div>
                    <div class="service-description">
                        Полная и частичная оклейка автомобиля защитными и декоративными пленками. Более 100 цветов и текстур в наличии.
                    </div>
                    <ul class="service-features">
                        <li>Защита от сколов и царапин</li>
                        <li>Более 100 цветов</li>
                        <li>Матовые и глянцевые текстуры</li>
                        <li>Гарантия 5 лет</li>
                    </ul>
                    <div class="price-tag">от 15 000 ₽</div>
                    <button class="btn-compact">Выбрать пленку</button>
                </div>
            </div>

            <div class="service-detail-card">
                <div class="service-image service-cleaning"></div>
                <div class="service-info">
                    <div class="service-detail-title">Химчистка салона</div>
                    <div class="service-description">
                        Глубокая очистка салона с использованием профессионального оборудования и экологичных средств.
                    </div>
                    <ul class="service-features">
                        <li>Очистка труднодоступных мест</li>
                        <li>Удаление сложных пятен</li>
                        <li>Антибактериальная обработка</li>
                        <li>Защита от загрязнений</li>
                    </ul>
                    <div class="price-tag">от 5 000 ₽</div>
                    <button class="btn-compact">Записаться онлайн</button>
                </div>
            </div>

            <!-- Дополнительные услуги -->
            <div class="service-detail-card">
                <div class="service-image service-antidog"></div>
                <div class="service-info">
                    <div class="service-detail-title">Керамическое покрытие</div>
                    <div class="service-description">
                        Керамические покрытия обеспечивают долговременную защиту лакокрасочного покрытия вашего автомобиля.
                    </div>
                    <ul class="service-features">
                        <li>Устойчивость к механическим повреждениям</li>
                        <li>Долговременная защита</li>
                        <li>Защита от коррозии</li>
                        <li>Глянцевый блеск</li>
                    </ul>
                    <div class="price-tag">от 3 000 ₽</div>
                    <button class="btn-compact">Заказать услугу</button>
                </div>
            </div>

            <div class="service-detail-card">
                <div class="service-image service-noise"></div>
                <div class="service-info">
                    <div class="service-detail-title">Уход за дисками и шинами</div>
                    <div class="service-description">
                        Чистка и полировка дисков, чернение и уход за шинами, керамическое покрытие дисков
                    </div>
                    <ul class="service-features">
                        <li>Профессиональная чистка дисков</li>
                        <li>Профессиональная полировка дисков</li>
                        <li>Уход за шинами</li>
                        <li>Керамическое покрытие дисков</li>
                    </ul>
                    <div class="price-tag">от 25 000 ₽</div>
                    <button class="btn-compact">Заказать услугу</button>
                </div>
            </div>

            <div class="service-detail-card">
                <div class="service-image service-tinting"></div>
                <div class="service-info">
                    <div class="service-detail-title">Дизайн-проект</div>
                    <div class="service-description">
                        Реализуем любые ваши идеи и фантазии в своём индивидульном дизайн-проекте
                    </div>
                    <ul class="service-features">
                        <li>Быстрая и высокачественная работа</li>
                        <li>Разработка уникального дизайна</li>
                        <li>Констультация в любых вопросах</li>
                        <li>Осуществление вашей мечты</li>
                    </ul>
                    <div class="price-tag">от 7 000 ₽</div>
                    <button class="btn-compact">Заказать услугу</button>
                </div>
            </div>

            <div class="service-detail-card">
                <div class="service-image service-glass"></div>
                <div class="service-info">
                    <div class="service-detail-title">Антихром</div>
                    <div class="service-description">
                        Антихром на авто - снятие хрома, разбор детали, грунтовка, окраска и покрытие лаком. Оклейка пленкой сложных деталей без снятия.
                    </div>
                    <ul class="service-features">
                        <li>Маскировка недостатков родного покрытия</li>
                        <li>Отсутствие эффекта шагрени</li>
                        <li>Современный внешний вид</li>
                        <li>Долговечность покрытия</li>
                    </ul>
                    <div class="price-tag">от 12 000 ₽</div>
                    <button class="btn-compact">Заказать услугу</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Страница каталога автомобилей -->
    <div class="catalog-page" id="catalogPage">
        <div class="page-header">
            <button class="back-button" onclick="goToMainPage()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="page-title">Каталог автомобилей</div>
            <div style="width: 24px;"></div>
        </div>

        <div class="filters-header">
            <div class="search-bar" style="flex: 1; margin: 0;">
                <i class="fas fa-search" style="color: var(--text-gray);"></i>
                <input type="text" class="search-input" placeholder="Поиск по марке или модели..." id="carSearch">
            </div>
            <button class="filter-toggle" onclick="toggleFilters()">
                <i class="fas fa-filter"></i>
                Фильтры
            </button>
        </div>

        <div class="filters-panel" id="filtersPanel">
            <div class="filter-group">
                <div class="filter-title">Марка и модель</div>
                <div class="filter-row">
                    <select class="filter-select" id="brandSelect">
                        <option value="">Все марки</option>
                        <option value="BMW">BMW</option>
                        <option value="Mercedes">Mercedes-Benz</option>
                        <option value="Audi">Audi</option>
                        <option value="Porsche">Porsche</option>
                        <option value="Land Rover">Land Rover</option>
                    </select>
                    <select class="filter-select" id="modelSelect">
                        <option value="">Все модели</option>
                    </select>
                </div>
            </div>

            <div class="filter-group">
                <div class="filter-title">Цена, ₽</div>
                <div class="price-inputs">
                    <input type="number" class="price-input" placeholder="от" id="priceMin" value="1000000">
                    <span>-</span>
                    <input type="number" class="price-input" placeholder="до" id="priceMax" value="15000000">
                </div>
            </div>

            <div class="filter-group">
                <div class="filter-title">Год</div>
                <div class="filter-row">
                    <select class="filter-select" id="yearFrom">
                        <option value="">от</option>
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                        <option value="2020">2020</option>
                    </select>
                    <select class="filter-select" id="yearTo">
                        <option value="">до</option>
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                        <option value="2020">2020</option>
                    </select>
                </div>
            </div>

            <div class="filter-group">
                <div class="filter-title">Пробег</div>
                <div class="filter-row">
                    <select class="filter-select" id="mileageFrom">
                        <option value="">от</option>
                        <option value="0">0 км</option>
                        <option value="10000">10 000 км</option>
                        <option value="50000">50 000 км</option>
                    </select>
                    <select class="filter-select" id="mileageTo">
                        <option value="">до</option>
                        <option value="10000">10 000 км</option>
                        <option value="50000">50 000 км</option>
                        <option value="100000">100 000 км</option>
                    </select>
                </div>
            </div>

            <button class="apply-filters" onclick="applyFilters()">Применить фильтры</button>
        </div>

        <div class="results-info" id="resultsInfo">
            Найдено 8 автомобилей
        </div>

        <div class="cars-grid" id="carsGrid">
            <!-- Автомобили будут загружены через JavaScript -->
        </div>
    </div>

    <!-- Страница избранного -->
    <div class="favorites-page" id="favoritesPage">
        <div class="page-header">
            <button class="back-button" onclick="goToMainPage()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="page-title">Избранное</div>
            <div style="width: 24px;"></div>
        </div>

        <div id="favoritesContent">
            <!-- Контент будет заполнен через JavaScript -->
        </div>
    </div>

    <!-- Страница профиля -->
    <div class="profile-page" id="profilePage">
        <div class="page-header">
            <button class="back-button" onclick="goToMainPage()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="page-title">Профиль</div>
            <div style="width: 24px;"></div>
        </div>

        <div class="profile-header">
            <div class="profile-avatar" id="profileAvatar">
                <!-- Аватар будет заполнен через JS -->
            </div>
            <div class="profile-name" id="profileName">Загрузка...</div>
            <div class="profile-phone" id="profilePhone">+7 (***) ***-**-**</div>
            <div class="profile-email" id="profileEmail">email@example.com</div>
        </div>

        <div class="profile-stats">
            <div class="stat-card">
                <div class="stat-number" id="bookingsCount">0</div>
                <div class="stat-label">Записей</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="favoritesCount">0</div>
                <div class="stat-label">Избранное</div>
            </div>
        </div>

        <div class="profile-menu">
            <div class="menu-item" onclick="showMyBookings()">
                <div class="menu-item-left">
                    <div class="menu-icon"><i class="fas fa-calendar-alt"></i></div>
                    <div class="menu-text">Мои записи</div>
                </div>
                <div class="menu-arrow"><i class="fas fa-chevron-right"></i></div>
            </div>
            
            <div class="menu-item" onclick="showMyCars()">
                <div class="menu-item-left">
                    <div class="menu-icon"><i class="fas fa-car"></i></div>
                    <div class="menu-text">Мои автомобили</div>
                </div>
                <div class="menu-arrow"><i class="fas fa-chevron-right"></i></div>
            </div>
            
            <div class="menu-item" onclick="showCertificates()">
                <div class="menu-item-left">
                    <div class="menu-icon"><i class="fas fa-gift"></i></div>
                    <div class="menu-text">Мои сертификаты</div>
                </div>
                <div class="menu-badge" id="certificatesBadge">2</div>
            </div>
            
            <div class="menu-item" onclick="showSettings()">
                <div class="menu-item-left">
                    <div class="menu-icon"><i class="fas fa-cog"></i></div>
                    <div class="menu-text">Настройки</div>
                </div>
                <div class="menu-arrow"><i class="fas fa-chevron-right"></i></div>
            </div>
            
            <div class="menu-item" onclick="showSupport()">
                <div class="menu-item-left">
                    <div class="menu-icon"><i class="fas fa-headset"></i></div>
                    <div class="menu-text">Поддержка</div>
                </div>
                <div class="menu-arrow"><i class="fas fa-chevron-right"></i></div>
            </div>
        </div>

        <button class="logout-btn" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i> Выйти из аккаунта
        </button>
    </div>

    <!-- Новая панель навигации -->
    <div class="bottom-nav-new" style="display: none;" id="bottomNavNew">
        <a href="#" class="nav-item-new active" onclick="goToMainPage()">
            <i class="fas fa-home nav-icon-new"></i>
            <span class="nav-text-new">Главная</span>
        </a>
        
        <a href="#" class="nav-item-new" onclick="goToCatalogPage()">
            <i class="fas fa-car nav-icon-new"></i>
            <span class="nav-text-new">Авто</span>
        </a>

        <a href="#" class="nav-center-item" onclick="showSearch()">
            <i class="fas fa-search nav-center-icon"></i>
        </a>

        <a href="#" class="nav-item-new" onclick="showFavoritesPage()">
            <i class="fas fa-heart nav-icon-new"></i>
            <span class="nav-text-new">Избранное</span>
        </a>
        
        <a href="#" class="nav-item-new" onclick="goToProfilePage()">
            <i class="fas fa-user nav-icon-new"></i>
            <span class="nav-text-new">Профиль</span>
        </a>
    </div>

    <div class="success-message" id="successMessage">
        Спасибо! Мы свяжемся с вами в течение 5 минут.
    </div>

    <script>
        // Система авторизации
        let currentUser = null;
        const users = JSON.parse(localStorage.getItem('carsalding_users')) || [];

        // Данные пользователя
        let userData = JSON.parse(localStorage.getItem('carsalding_user_data')) || {
            bookings: 3,
            favorites: 0,
            certificates: 2
        };

        // Избранные автомобили
        let favorites = JSON.parse(localStorage.getItem('carsalding_favorites')) || [];

        // Данные автомобилей
        const carsData = [
            {
                id: 1,
                brand: "BMW",
                model: "X5",
                year: 2022,
                price: 8500000,
                imageClass: "car-bmw-x5",
                mileage: 15000,
                engine: "3.0 л",
                transmission: "Автомат",
                bodyType: "Внедорожник",
                drive: "Полный",
                color: "Черный",
                isNew: true
            },
            {
                id: 2,
                brand: "Mercedes",
                model: "E-Class",
                year: 2021,
                price: 6200000,
                imageClass: "car-mercedes-e",
                mileage: 45000,
                engine: "2.0 л",
                transmission: "Автомат",
                bodyType: "Седан",
                drive: "Задний",
                color: "Белый",
                isNew: false
            },
            {
                id: 3,
                brand: "Audi",
                model: "Q7",
                year: 2023,
                price: 9200000,
                imageClass: "car-audi-q7",
                mileage: 5000,
                engine: "3.0 л",
                transmission: "Автомат",
                bodyType: "Внедорожник",
                drive: "Полный",
                color: "Серый",
                isNew: true
            },
            {
                id: 4,
                brand: "Porsche",
                model: "Cayenne",
                year: 2022,
                price: 12500000,
                imageClass: "car-porsche-cayenne",
                mileage: 12000,
                engine: "3.0 л",
                transmission: "Автомат",
                bodyType: "Внедорожник",
                drive: "Полный",
                color: "Красный",
                isNew: true
            }
        ];

        // Инициализация Telegram Web App
        let tg = window.Telegram.WebApp;
        tg.expand();

        // Проверка авторизации при загрузке
        document.addEventListener('DOMContentLoaded', function() {
            const savedUser = localStorage.getItem('carsalding_current_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showMainApp();
            } else {
                showAuthPage();
            }
        });

        // Функции избранного
        function toggleFavorite(carId) {
            if (!currentUser) {
                showError('Для добавления в избранное необходимо войти в аккаунт');
                return;
            }

            const index = favorites.indexOf(carId);
            if (index > -1) {
                // Удаляем из избранного
                favorites.splice(index, 1);
                showSuccess('Автомобиль удален из избранного');
            } else {
                // Добавляем в избранное
                favorites.push(carId);
                showSuccess('Автомобиль добавлен в избранное');
            }

            // Сохраняем в localStorage
            localStorage.setItem('carsalding_favorites', JSON.stringify(favorites));
            
            // Обновляем счетчик в профиле
            userData.favorites = favorites.length;
            localStorage.setItem('carsalding_user_data', JSON.stringify(userData));
            
            // Обновляем отображение
            updateFavoriteButtons();
            if (document.getElementById('favoritesPage').style.display === 'block') {
                showFavoritesPage();
            }
            updateProfileData();
        }

        function isFavorite(carId) {
            return favorites.includes(carId);
        }

        function updateFavoriteButtons() {
            // Обновляем кнопки в каталоге
            const favoriteButtons = document.querySelectorAll('.favorite-btn');
            favoriteButtons.forEach(btn => {
                const carId = parseInt(btn.getAttribute('data-car-id'));
                if (isFavorite(carId)) {
                    btn.classList.add('active');
                    btn.innerHTML = '<i class="fas fa-heart"></i>';
                } else {
                    btn.classList.remove('active');
                    btn.innerHTML = '<i class="far fa-heart"></i>';
                }
            });
        }

        function showFavoritesPage() {
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('servicesPage').style.display = 'none';
            document.getElementById('catalogPage').style.display = 'none';
            document.getElementById('profilePage').style.display = 'none';
            document.getElementById('favoritesPage').style.display = 'block';
            updateNav('favorites');
            renderFavorites();
        }

        function renderFavorites() {
            const favoritesContent = document.getElementById('favoritesContent');
            
            if (favorites.length === 0) {
                favoritesContent.innerHTML = `
                    <div class="favorites-empty">
                        <div class="favorites-empty-icon">
                            <i class="far fa-heart"></i>
                        </div>
                        <div class="favorites-empty-title">В избранном пусто</div>
                        <div class="favorites-empty-text">
                            Добавляйте понравившиеся автомобили в избранное, чтобы не потерять их
                        </div>
                        <button class="btn-compact" onclick="goToCatalogPage()">
                            Перейти в каталог
                        </button>
                    </div>
                `;
            } else {
                const favoriteCars = carsData.filter(car => favorites.includes(car.id));
                
                favoritesContent.innerHTML = `
                    <div class="favorites-list">
                        ${favoriteCars.map(car => `
                            <div class="favorite-card">
                                <button class="favorite-remove" onclick="toggleFavorite(${car.id})">
                                    <i class="fas fa-times"></i>
                                </button>
                                <div class="favorite-image ${car.imageClass}">
                                    ${car.isNew ? '<div class="car-badge">НОВЫЙ</div>' : ''}
                                </div>
                                <div class="favorite-info">
                                    <div class="favorite-title">${car.brand} ${car.model}</div>
                                    <div class="favorite-details">${car.year} год, ${car.engine}, ${car.transmission}, ${car.drive} привод</div>
                                    <div class="favorite-price">${car.price.toLocaleString()} ₽</div>
                                    <div class="favorite-features">
                                        <div class="favorite-feature">
                                            <i class="fas fa-road"></i>
                                            <span>${car.mileage.toLocaleString()} км</span>
                                        </div>
                                        <div class="favorite-feature">
                                            <i class="fas fa-palette"></i>
                                            <span>${car.color}</span>
                                        </div>
                                    </div>
                                    <button class="view-details-btn" onclick="showCarDetails(${car.id})">Подробнее о автомобиле</button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
        }

        function removeFromFavorites(carId) {
            toggleFavorite(carId);
        }

        // Остальные функции остаются без изменений
        function showAuthTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            if (tab === 'login') {
                document.querySelector('.auth-tab:nth-child(1)').classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.querySelector('.auth-tab:nth-child(2)').classList.add('active');
                document.getElementById('registerForm').classList.add('active');
            }
        }

        function register() {
            const name = document.getElementById('registerName').value;
            const phone = document.getElementById('registerPhone').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;

            if (!name || !phone || !email || !password || !confirmPassword) {
                showError('Заполните все поля');
                return;
            }

            if (password !== confirmPassword) {
                showError('Пароли не совпадают');
                return;
            }

            if (password.length < 6) {
                showError('Пароль должен содержать минимум 6 символов');
                return;
            }

            const existingUser = users.find(u => u.phone === phone || u.email === email);
            if (existingUser) {
                showError('Пользователь с таким телефоном или email уже существует');
                return;
            }

            const newUser = {
                id: Date.now(),
                name: name,
                phone: phone,
                email: email,
                password: password,
                registrationDate: new Date().toISOString()
            };

            users.push(newUser);
            localStorage.setItem('carsalding_users', JSON.stringify(users));
            
            currentUser = newUser;
            localStorage.setItem('carsalding_current_user', JSON.stringify(newUser));
            
            showSuccess('Регистрация прошла успешно!');
            showMainApp();
        }

        function login() {
            const phone = document.getElementById('loginPhone').value;
            const password = document.getElementById('loginPassword').value;

            if (!phone || !password) {
                showError('Заполните все поля');
                return;
            }

            const user = users.find(u => u.phone === phone && u.password === password);
            if (!user) {
                showError('Неверный телефон или пароль');
                return;
            }

            currentUser = user;
            localStorage.setItem('carsalding_current_user', JSON.stringify(user));
            
            showSuccess('Вход выполнен успешно!');
            showMainApp();
        }

        function showAuthPage() {
            document.getElementById('authPage').style.display = 'flex';
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('profilePage').style.display = 'none';
            document.getElementById('favoritesPage').style.display = 'none';
            document.getElementById('bottomNavNew').style.display = 'none';
        }

        function showMainApp() {
            document.getElementById('authPage').style.display = 'none';
            document.getElementById('mainPage').style.display = 'block';
            document.getElementById('profilePage').style.display = 'none';
            document.getElementById('favoritesPage').style.display = 'none';
            document.getElementById('bottomNavNew').style.display = 'flex';
            
            const fadeElements = document.querySelectorAll('.fade-in');
            fadeElements.forEach(el => {
                el.style.opacity = 1;
            });
            
            updateFavoriteButtons();
            updateProfileData();
        }

        function logout() {
            if (confirm('Вы уверены, что хотите выйти из аккаунта?')) {
                currentUser = null;
                localStorage.removeItem('carsalding_current_user');
                showAuthPage();
                showAuthTab('login');
                showSuccess('Вы вышли из аккаунта');
            }
        }

        function showError(message) {
            alert(message);
        }

        function showSuccess(message) {
            document.getElementById('successMessage').textContent = message;
            document.getElementById('successMessage').classList.add('show');
            setTimeout(() => {
                document.getElementById('successMessage').classList.remove('show');
            }, 3000);
        }

        // Навигация
        function goToMainPage() {
            document.getElementById('mainPage').style.display = 'block';
            document.getElementById('servicesPage').style.display = 'none';
            document.getElementById('catalogPage').style.display = 'none';
            document.getElementById('profilePage').style.display = 'none';
            document.getElementById('favoritesPage').style.display = 'none';
            updateNav('home');
        }

        function showAllServicesPage() {
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('servicesPage').style.display = 'block';
            document.getElementById('catalogPage').style.display = 'none';
            document.getElementById('profilePage').style.display = 'none';
            document.getElementById('favoritesPage').style.display = 'none';
            updateNav('services');
        }

        function goToCatalogPage() {
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('servicesPage').style.display = 'none';
            document.getElementById('catalogPage').style.display = 'block';
            document.getElementById('profilePage').style.display = 'none';
            document.getElementById('favoritesPage').style.display = 'none';
            updateNav('catalog');
            renderCars();
        }

        function goToProfilePage() {
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('servicesPage').style.display = 'none';
            document.getElementById('catalogPage').style.display = 'none';
            document.getElementById('profilePage').style.display = 'block';
            document.getElementById('favoritesPage').style.display = 'none';
            updateNav('profile');
            updateProfileData();
        }

        function showSearch() {
            alert('Функция поиска будет доступна в следующем обновлении');
        }

        function updateNav(activeItem) {
            document.querySelectorAll('.nav-item-new').forEach(item => {
                item.classList.remove('active');
            });
            
            if (activeItem === 'home') {
                document.querySelector('.nav-item-new:nth-child(1)').classList.add('active');
            } else if (activeItem === 'catalog') {
                document.querySelector('.nav-item-new:nth-child(2)').classList.add('active');
            } else if (activeItem === 'favorites') {
                document.querySelector('.nav-item-new:nth-child(4)').classList.add('active');
            } else if (activeItem === 'profile') {
                document.querySelector('.nav-item-new:nth-child(5)').classList.add('active');
            }
        }

        // Функции профиля
        function updateProfileData() {
            if (currentUser) {
                const avatar = document.getElementById('profileAvatar');
                const initials = currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase();
                avatar.innerHTML = initials;
                
                document.getElementById('profileName').textContent = currentUser.name;
                document.getElementById('profilePhone').textContent = currentUser.phone;
                document.getElementById('profileEmail').textContent = currentUser.email;
                
                document.getElementById('bookingsCount').textContent = userData.bookings;
                document.getElementById('favoritesCount').textContent = favorites.length;
                document.getElementById('certificatesBadge').textContent = userData.certificates;
            }
        }

        function showMyBookings() {
            alert('Здесь будут отображаться ваши записи на услуги\n\nЗапись 1: Полировка кузова - 15.12.2023\nЗапись 2: Химчистка салона - 18.12.2023\nЗапись 3: Оклейка пленкой - 22.12.2023');
        }

        function showMyCars() {
            alert('Здесь будут отображаться ваши автомобили\n\nBMW X5 (2022)\nMercedes E-Class (2021)\nAudi Q7 (2023)');
        }

        function showCertificates() {
            alert('Здесь будут отображаться ваши сертификаты\n\nСертификат на химчистку - 5 000 ₽\nСертификат на полировку - 8 000 ₽');
        }

        function showSettings() {
            alert('Здесь будут настройки вашего аккаунта\n\nУведомления\nЯзык\nТема оформления\nКонфиденциальность');
        }

        function showSupport() {
            alert('Служба поддержки CARSALDING\n\nТелефон: +7 (495) 123-45-67\nEmail: support@carsalding.ru\nЧасы работы: 9:00-22:00');
        }

        // Остальной функционал
        function openServiceModal(service) {
            showAllServicesPage();
        }

        function openMap() {
            alert('Открывается карта с маршрутом до детейлинг-центра');
        }

        function submitForm() {
            const name = document.getElementById('clientName').value;
            const phone = document.getElementById('clientPhone').value;
            
            if (!name || !phone) {
                alert('Пожалуйста, заполните все поля');
                return;
            }
            
            showSuccess('Спасибо! Мы свяжемся с вами в течение 5 минут.');
            document.getElementById('clientName').value = '';
            document.getElementById('clientPhone').value = '';
        }

        // Функции для каталога автомобилей
        function toggleFilters() {
            const panel = document.getElementById('filtersPanel');
            panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
        }

        function applyFilters() {
            document.getElementById('filtersPanel').style.display = 'none';
        }

        function renderCars() {
            const carsGrid = document.getElementById('carsGrid');
            carsGrid.innerHTML = carsData.map(car => `
                <div class="car-card">
                    <button class="favorite-btn ${isFavorite(car.id) ? 'active' : ''}" 
                            data-car-id="${car.id}" 
                            onclick="toggleFavorite(${car.id})">
                        <i class="${isFavorite(car.id) ? 'fas' : 'far'} fa-heart"></i>
                    </button>
                    <div class="car-image ${car.imageClass}" onclick="showCarDetails(${car.id})">
                        ${car.isNew ? '<div class="car-badge">НОВЫЙ</div>' : ''}
                    </div>
                    <div class="car-info">
                        <div class="car-title">${car.brand} ${car.model}</div>
                        <div class="car-details">${car.year} год, ${car.engine}, ${car.transmission}, ${car.drive} привод</div>
                        <div class="car-price">${car.price.toLocaleString()} ₽</div>
                        <div class="car-features">
                            <div class="car-feature">
                                <i class="fas fa-road"></i>
                                <span>${car.mileage.toLocaleString()} км</span>
                            </div>
                            <div class="car-feature">
                                <i class="fas fa-palette"></i>
                                <span>${car.color}</span>
                            </div>
                        </div>
                        <button class="view-details-btn" onclick="showCarDetails(${car.id})">Подробнее о автомобиле</button>
                    </div>
                </div>
            `).join('');
        }

        function showCarDetails(carId) {
            const car = carsData.find(c => c.id === carId);
            alert(`Детали автомобиля: ${car.brand} ${car.model}\nЦена: ${car.price.toLocaleString()} ₽`);
        }
    </script>
</body>
</html>